<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Eco Dashboard - Pocket Garden</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Quicksand:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary-green: #478778;
            --light-green: #AFE1AF;
            --accent-green: #AFE1AF;
            --soft-green: #AFE1AF;
            --dark-green: #097969;
            --white: #ffffff;
            --light-gray: #f5f5f5;
            --dark-gray: #333333;
            --shadow: rgba(0, 0, 0, 0.1);
            --earthcoin-gold: #FFD700;
            --earthcoin-dark: #B8860B;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            color: var(--dark-gray);
            line-height: 1.6;
            background-color: #f9fdf9;
            background:
                linear-gradient(rgba(255, 255, 255, 0.45), rgba(255,255,255,0.45)),
                url("bg.jpeg");
        }
        
        /* Header & Navigation */
        header {
            padding: 20px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            background-color: white;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }
        
        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
        }
        
        .logo-icon {
            font-size: 28px;
            color: var(--primary-green);
            margin-right: 10px;
        }
        
        .logo-text {
            font-family: 'Quicksand', sans-serif;
            font-size: 32px;
            font-weight: 700;
            color: var(--primary-green);
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .nav-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background-color: var(--light-gray);
            border-radius: 50px;
            text-decoration: none;
            color: var(--dark-gray);
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .nav-btn:hover {
            background-color: var(--primary-green);
            color: white;
            transform: translateY(-2px);
        }
        
        .nav-btn i {
            font-size: 18px;
        }
        
        .earthcoin-display {
            display: flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, var(--earthcoin-gold), var(--earthcoin-dark));
            color: white;
            padding: 8px 20px;
            border-radius: 50px;
            font-weight: 600;
            box-shadow: 0 3px 10px rgba(184, 134, 11, 0.2);
        }
        
        .earthcoin-display i {
            font-size: 20px;
        }
        
        .user-profile {
            margin-left: 10px;
        }
        
        .profile-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--soft-green);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
        }
        
        .profile-circle:hover {
            transform: scale(1.05);
        }
        
        .profile-placeholder {
            font-size: 24px;
        }
        
        .profile-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }
        
        /* Profile Dropdown */
        .profile-dropdown {
            position: absolute;
            top: 100%;
            right: 20px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            width: 280px;
            z-index: 1000;
            display: none;
            overflow: hidden;
        }
        
        .profile-dropdown.show {
            display: block;
        }
        
        .dropdown-header {
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-green), var(--dark-green));
            color: white;
            text-align: center;
        }
        
        .dropdown-profile-circle {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.2);
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .dropdown-profile-placeholder {
            font-size: 32px;
        }
        
        .dropdown-profile-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }
        
        .dropdown-user-name {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .dropdown-user-email {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .dropdown-menu {
            padding: 10px 0;
        }
        
        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            text-decoration: none;
            color: var(--dark-gray);
            transition: all 0.3s ease;
        }
        
        .dropdown-item:hover {
            background-color: var(--light-gray);
            color: var(--primary-green);
        }
        
        .dropdown-item i {
            width: 20px;
            text-align: center;
        }
        
        .dropdown-divider {
            height: 1px;
            background-color: #eee;
            margin: 10px 0;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Dashboard Layout */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }
        
        /* Welcome Card */
        .welcome-card {
            grid-column: span 8;
            background: linear-gradient(135deg, var(--primary-green), var(--dark-green));
            color: white;
            border-radius: 20px;
            padding: 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 10px 30px rgba(71, 135, 120, 0.2);
        }
        
        .welcome-text h2 {
            font-family: 'Quicksand', sans-serif;
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .welcome-text p {
            opacity: 0.9;
            font-size: 16px;
            max-width: 500px;
        }
        
        .welcome-plant {
            font-size: 80px;
            opacity: 0.8;
        }
        
        /* Rank Card */
        .rank-card {
            grid-column: span 4;
            background-color: white;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            border: 2px solid var(--light-green);
        }
        
        .rank-circle {
            width: 100px;
            height: 100px;
            background-color: var(--soft-green);
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: var(--primary-green);
        }
        
        .rank-name {
            font-family: 'Quicksand', sans-serif;
            font-size: 24px;
            color: var(--dark-green);
            margin-bottom: 10px;
        }
        
        .rank-progress {
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 4px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .rank-fill {
            height: 100%;
            background: linear-gradient(to right, var(--light-green), var(--primary-green));
            border-radius: 4px;
        }
        
        .rank-next {
            font-size: 14px;
            color: #666;
        }
        
        /* Stats Overview */
        .stats-overview {
            grid-column: span 12;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .stat-icon {
            font-size: 40px;
            margin-bottom: 15px;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--dark-green);
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 14px;
            color: #666;
        }
        
        .stat-change {
            font-size: 12px;
            color: #4CAF50;
            margin-top: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        
        /* EarthCredits Card */
        .earthcoin-card {
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: 3px solid var(--earthcoin-gold);
            margin-bottom: 20px;
        }
        
        .earthcoin-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .earthcoin-icon {
            font-size: 32px;
            color: var(--earthcoin-dark);
        }
        
        .earthcoin-title {
            font-family: 'Quicksand', sans-serif;
            font-size: 24px;
            color: var(--earthcoin-dark);
        }
        
        .earthcoin-amount {
            font-size: 48px;
            font-weight: 700;
            color: var(--earthcoin-dark);
            margin: 15px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        /* Shop Section */
        .shop-section {
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid var(--light-green);
        }
        
        .shop-title {
            font-family: 'Quicksand', sans-serif;
            font-size: 20px;
            color: var(--dark-green);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .shop-items {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .shop-item {
            background-color: #f9f9f9;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .shop-item:hover {
            border-color: var(--primary-green);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .shop-item-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .shop-item-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--dark-green);
            margin-bottom: 5px;
        }
        
        .shop-item-price {
            font-size: 12px;
            color: var(--earthcoin-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        
        .shop-item.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
        
        /* Main Content */
        .main-content {
            grid-column: span 8;
        }
        
        .section-title {
            font-family: 'Quicksand', sans-serif;
            font-size: 24px;
            color: var(--dark-green);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Daily Check-in Card */
        .daily-card {
            background-color: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        }
        
        .daily-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .date-display {
            font-size: 18px;
            color: var(--dark-green);
            font-weight: 600;
        }
        
        .streak-display {
            display: flex;
            align-items: center;
            gap: 8px;
            background-color: #fff8e1;
            padding: 8px 15px;
            border-radius: 50px;
            font-weight: 600;
        }
        
        .streak-display i {
            color: #FF9800;
        }
        
        /* Category Tabs */
        .category-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .tab-btn {
            padding: 12px 25px;
            background-color: #f5f5f5;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tab-btn.active {
            background-color: var(--primary-green);
            color: white;
        }
        
        .tab-btn:hover:not(.active) {
            background-color: #e0e0e0;
        }
        
        /* Habit Options - FIXED STYLES */
        .habit-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .habit-option {
            background-color: #f9f9f9;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
        }
        
        .habit-option:hover {
            border-color: var(--primary-green);
            background-color: #f0f9f0;
            transform: translateY(-2px);
        }
        
        .habit-option.selected {
            border-color: var(--primary-green);
            background-color: #f0f9f0;
            box-shadow: 0 0 0 3px rgba(71, 135, 120, 0.2);
            transform: scale(1.02);
        }
        
        .habit-option.selected::after {
            content: "‚úì";
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: var(--primary-green);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
        }
        
        .habit-icon {
            font-size: 32px;
            width: 50px;
            height: 50px;
            background-color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .habit-info h4 {
            font-size: 16px;
            color: var(--dark-green);
            margin-bottom: 5px;
        }
        
        .habit-info p {
            font-size: 14px;
            color: #666;
        }
        
        .habit-points {
            margin-left: auto;
            background-color: var(--primary-green);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
        }
        
        .improvement-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--earthcoin-gold);
            color: var(--earthcoin-dark);
            font-size: 10px;
            font-weight: bold;
            padding: 3px 8px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            display: none;
        }
        
        /* Baseline Comparison Section */
        .baseline-comparison {
            background-color: #f9fdf9;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            border-left: 5px solid var(--primary-green);
        }
        
        .baseline-comparison h4 {
            color: var(--dark-green);
            margin-bottom: 15px;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .comparison-item {
            background-color: white;
            border-radius: 10px;
            padding: 15px;
            border: 1px solid #e0f2e1;
            position: relative;
        }
        
        .comparison-category {
            font-weight: 600;
            color: var(--primary-green);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .comparison-baseline {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }
        
        .comparison-today {
            font-size: 14px;
            color: var(--dark-green);
            font-weight: 500;
            margin-bottom: 8px;
        }
        
        .improvement-earned {
            font-size: 12px;
            color: var(--earthcoin-dark);
            background-color: #fff8e1;
            padding: 3px 10px;
            border-radius: 20px;
            display: inline-block;
            margin-top: 8px;
        }
        
        /* Submit Button */
        .submit-btn {
            width: 100%;
            padding: 18px;
            background-color: var(--primary-green);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-top: 20px;
        }
        
        .submit-btn:hover {
            background-color: var(--dark-green);
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(71, 135, 120, 0.3);
        }
        
        .submit-btn.disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        /* Sidebar */
        .sidebar {
            grid-column: span 4;
        }
        
        /* Baseline Summary Card */
        .baseline-card {
            background-color: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        }
        
        .baseline-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .edit-baseline {
            color: var(--primary-green);
            text-decoration: none;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease;
        }
        
        .edit-baseline:hover {
            text-decoration: underline;
            transform: translateX(3px);
        }
        
        .baseline-categories {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .baseline-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background-color: #f9f9f9;
            border-radius: 10px;
            border-left: 4px solid var(--primary-green);
        }
        
        .baseline-icon {
            font-size: 20px;
            width: 40px;
            height: 40px;
            background-color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .baseline-text h4 {
            font-size: 14px;
            color: var(--dark-green);
            margin-bottom: 3px;
        }
        
        .baseline-text p {
            font-size: 12px;
            color: #666;
        }
        
        /* Recent Activity */
        .activity-card {
            background-color: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        }
        
        .activity-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .activity-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding-bottom: 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .activity-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }
        
        .activity-icon {
            width: 40px;
            height: 40px;
            background-color: #f0f9f0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: var(--primary-green);
        }
        
        .activity-details h4 {
            font-size: 14px;
            color: var(--dark-green);
            margin-bottom: 3px;
        }
        
        .activity-details p {
            font-size: 12px;
            color: #666;
        }
        
        .activity-points {
            margin-left: auto;
            font-weight: 600;
            color: var(--earthcoin-dark);
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 3px;
        }
        
        /* Quick Actions */
        .quick-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        .action-btn {
            flex: 1;
            padding: 15px;
            background-color: white;
            border: 2px solid var(--light-green);
            border-radius: 15px;
            color: var(--dark-green);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            text-decoration: none;
        }
        
        .action-btn:hover {
            background-color: var(--soft-green);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .action-btn i {
            font-size: 24px;
        }
        
        /* Daily Summary */
        .daily-summary {
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #f0f9f0, #e0f2e1);
            border-radius: 20px;
            display: none;
        }
        
        .summary-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .summary-title {
            font-family: 'Quicksand', sans-serif;
            font-size: 24px;
            color: var(--dark-green);
        }
        
        .summary-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .summary-stat {
            text-align: center;
            padding: 15px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .summary-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--dark-green);
            margin-bottom: 5px;
        }
        
        .summary-label {
            font-size: 14px;
            color: #666;
        }
        
        .improvement-highlight {
            background-color: #fff8e1;
            border: 2px solid var(--earthcoin-gold);
            padding: 15px;
            border-radius: 15px;
            margin-top: 20px;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 30px 0;
            color: #666;
            font-size: 14px;
            border-top: 1px solid #eee;
            margin-top: 40px;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            text-align: center;
        }
        
        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }
        
        /* Responsive */
        @media (max-width: 1024px) {
            .welcome-card {
                grid-column: span 12;
            }
            
            .rank-card {
                grid-column: span 12;
            }
            
            .stats-overview {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .main-content {
                grid-column: span 12;
            }
            
            .sidebar {
                grid-column: span 12;
            }
            
            .header-actions {
                flex-wrap: wrap;
                justify-content: flex-end;
            }
            
            .summary-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .habit-options {
                grid-template-columns: 1fr;
            }
            
            .stats-overview {
                grid-template-columns: 1fr;
            }
            
            .quick-actions {
                flex-direction: column;
            }
            
            .welcome-card {
                flex-direction: column;
                text-align: center;
                gap: 20px;
            }
            
            .category-tabs {
                justify-content: center;
            }
            
            .header-container {
                flex-direction: column;
                gap: 20px;
            }
            
            .header-actions {
                justify-content: center;
                width: 100%;
            }
            
            .nav-btn span {
                display: none;
            }
            
            .nav-btn {
                padding: 10px;
            }
            
            .shop-items {
                grid-template-columns: 1fr;
            }
            
            .summary-stats {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }
            
            .daily-card,
            .baseline-card,
            .activity-card {
                padding: 20px;
            }
            
            .section-title {
                font-size: 20px;
            }
            
            .tab-btn {
                padding: 10px 15px;
                font-size: 14px;
            }
            
            .earthcoin-display span {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-container">
            <div class="logo">
                <div class="logo-icon">üå±</div>
                <div class="logo-text">Pocket Garden</div>
            </div>
            
            <nav class="header-actions">
                <a href="dashboard.html" class="nav-btn">
                    <i class="fas fa-tachometer-alt"></i> <span>Dashboard</span>
                </a>
                <a href="community.html" class="nav-btn">
                    <i class="fas fa-users"></i> <span>Community</span>
                </a>
                <a href="html.html" class="nav-btn">
                    <i class="fas fa-seedling"></i> <span>Your Garden</span>
                </a>
                
                <div class="earthcoin-display" id="headerEarthCoins">
                    <i class="fas fa-coins"></i> <span id="earthCoinsCount">0</span> ü™ô
                </div>
                
                <div class="user-profile">
                    <div class="profile-circle" id="profileCircle">
                        <div class="profile-placeholder" id="profilePlaceholder">üêô</div>
                        <img id="profileImage" class="profile-image" style="display: none;" alt="Profile Icon">
                    </div>
                </div>
            </nav>
        </div>
        
        <!-- Profile Dropdown -->
        <div class="profile-dropdown" id="profileDropdown">
            <div class="dropdown-header">
                <div class="dropdown-profile-circle" id="dropdownProfileCircle">
                    <div class="dropdown-profile-placeholder" id="dropdownProfilePlaceholder">üêô</div>
                    <img id="dropdownProfileImage" class="dropdown-profile-image" style="display: none;" alt="Profile Icon">
                </div>
                <div class="dropdown-user-name" id="dropdownUserName">User Name</div>
                <div class="dropdown-user-email" id="dropdownUserEmail">user@example.com</div>
            </div>
            <div class="dropdown-menu">
                <a href="profile.html" class="dropdown-item">
                    <i class="fas fa-user"></i> My Profile
                </a>
                <a href="dashboard.html" class="dropdown-item">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </a>
                <a href="html.html" class="dropdown-item">
                    <i class="fas fa-seedling"></i> Your Garden
                </a>
                <a href="settings.html" class="dropdown-item">
                    <i class="fas fa-cog"></i> Settings
                </a>
                <div class="dropdown-divider"></div>
                <a href="index.html" class="dropdown-item" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </div>
        </div>
    </header>
    
    <div class="container">
        <!-- Dashboard Grid -->
        <div class="dashboard-grid">
            <!-- Welcome Card -->
            <div class="welcome-card">
                <div class="welcome-text">
                    <h2>Welcome back, <span id="welcomeName">Gardener</span>! üåø</h2>
                    <p>Log your daily eco-habits below. Earn EarthCredits ü™ô for improvements over your baseline!</p>
                </div>
                <div class="welcome-plant" id="userPlant">
                    üå±
                </div>
            </div>
            
            <!-- Rank Card -->
            <div class="rank-card">
                <div class="rank-circle" id="rankIcon">üîò</div>
                <div class="rank-name" id="dashboardRank">Carbon Recruit</div>
                <div class="rank-progress">
                    <div class="rank-fill" id="rankProgress"></div>
                </div>
                <p class="rank-next" id="nextRank">Earn 100 EarthCredits to level up!</p>
            </div>
            
            <!-- Stats Overview -->
            <div class="stats-overview">
                <div class="stat-card">
                    <div class="stat-icon">üî•</div>
                    <div class="stat-value" id="streakCount">0</div>
                    <div class="stat-label">Day Streak</div>
                    <div class="stat-change" id="streakChange">
                        <i class="fas fa-arrow-up"></i> Keep it up!
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">ü™ô</div>
                    <div class="stat-value" id="totalPoints">0</div>
                    <div class="stat-label">EarthCredits</div>
                    <div class="stat-change" id="pointsChange">
                        <i class="fas fa-plus"></i> Today: 0
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">üåç</div>
                    <div class="stat-value" id="kgSaved">0kg</div>
                    <div class="stat-label">CO‚ÇÇ Saved</div>
                    <div class="stat-change" id="savingsChange">
                        <i class="fas fa-leaf"></i> Making a difference!
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">üå±</div>
                    <div class="stat-value" id="plantsCount">1</div>
                    <div class="stat-label">Plants Growing</div>
                    <div class="stat-change">
                        <i class="fas fa-seedling"></i> Grow your garden!
                    </div>
                </div>
            </div>
            
            <!-- Main Content - Daily Check-in -->
            <div class="main-content">
                <div class="daily-card">
                    <div class="daily-header">
                        <div class="date-display">
                            <i class="far fa-calendar-alt"></i> <span id="currentDate">Today's Eco-Habit Log</span>
                        </div>
                        <div class="streak-display">
                            <i class="fas fa-fire"></i> <span id="currentStreak">0</span> day streak
                        </div>
                    </div>
                    
                    <h3 class="section-title">
                        <i class="fas fa-tasks"></i> Log Your Daily Eco Actions
                    </h3>
                    
                    <p style="margin-bottom: 20px; color: #666;">Select the eco-friendly actions you took today. Compare with your baseline to earn bonus EarthCredits! ü™ô</p>
                    
                    <div class="category-tabs">
                        <button class="tab-btn active" data-category="transport">
                            <i class="fas fa-car"></i> Transport
                        </button>
                        <button class="tab-btn" data-category="food">
                            <i class="fas fa-utensils"></i> Food
                        </button>
                        <button class="tab-btn" data-category="energy">
                            <i class="fas fa-bolt"></i> Energy
                        </button>
                        <button class="tab-btn" data-category="shopping">
                            <i class="fas fa-shopping-bag"></i> Shopping
                        </button>
                    </div>
                    
                    <!-- Transport Habits -->
                    <div class="habit-category active" id="transport-habits">
                        <div class="habit-options">
                            <div class="habit-option" data-points="15" data-impact="2.5" data-baseline-mapping="walking,cycling">
                                <div class="habit-icon">üö∂</div>
                                <div class="habit-info">
                                    <h4>Walked or cycled</h4>
                                    <p>Chose active travel instead of driving</p>
                                </div>
                                <div class="habit-points">+15 ü™ô</div>
                            </div>
                            
                            <div class="habit-option" data-points="12" data-impact="2.0" data-baseline-mapping="bus,train">
                                <div class="habit-icon">üöå</div>
                                <div class="habit-info">
                                    <h4>Used public transport</h4>
                                    <p>Took bus, train, or tram instead of car</p>
                                </div>
                                <div class="habit-points">+12 ü™ô</div>
                            </div>
                            
                            <div class="habit-option" data-points="8" data-impact="1.0" data-baseline-mapping="car-shared">
                                <div class="habit-icon">üöó</div>
                                <div class="habit-info">
                                    <h4>Car shared or electric</h4>
                                    <p>Shared ride or used electric vehicle</p>
                                </div>
                                <div class="habit-points">+8 ü™ô</div>
                            </div>
                            
                            <div class="habit-option" data-points="20" data-impact="3.0" data-baseline-mapping="car-own,motorbike">
                                <div class="habit-icon">üè†</div>
                                <div class="habit-info">
                                    <h4>Worked from home</h4>
                                    <p>No commute needed today</p>
                                </div>
                                <div class="habit-points">+20 ü™ô</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Food Habits (Hidden by default) -->
                    <div class="habit-category" id="food-habits" style="display: none;">
                        <div class="habit-options">
                            <div class="habit-option" data-points="18" data-impact="2.0" data-baseline-mapping="plant-based">
                                <div class="habit-icon">üå±</div>
                                <div class="habit-info">
                                    <h4>Plant-based meals</h4>
                                    <p>All meals vegan/vegetarian today</p>
                                </div>
                                <div class="habit-points">+18 ü™ô</div>
                            </div>
                            
                            <div class="habit-option" data-points="12" data-impact="1.5" data-baseline-mapping="vegetarian">
                                <div class="habit-icon">ü•ó</div>
                                <div class="habit-info">
                                    <h4>Meat-free day</h4>
                                    <p>No meat or fish today</p>
                                </div>
                                <div class="habit-points">+12 ü™ô</div>
                            </div>
                            
                            <div class="habit-option" data-points="10" data-impact="1.0" data-baseline-mapping="some-fish">
                                <div class="habit-icon">üè∑Ô∏è</div>
                                <div class="habit-info">
                                    <h4>Local/seasonal food</h4>
                                    <p>Supported local producers</p>
                                </div>
                                <div class="habit-points">+10 ü™ô</div>
                            </div>
                            
                            <div class="habit-option" data-points="15" data-impact="1.8" data-baseline-mapping="some-meat">
                                <div class="habit-icon">üö´</div>
                                <div class="habit-info">
                                    <h4>No food waste</h4>
                                    <p>Used all leftovers, no waste</p>
                                </div>
                                <div class="habit-points">+15 ü™ô</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Energy Habits (Hidden by default) -->
                    <div class="habit-category" id="energy-habits" style="display: none;">
                        <div class="habit-options">
                            <div class="habit-option" data-points="8" data-impact="0.8" data-baseline-mapping="always-off">
                                <div class="habit-icon">üí°</div>
                                <div class="habit-info">
                                    <h4>Lights off</h4>
                                    <p>Remembered to switch off unused lights</p>
                                </div>
                                <div class="habit-points">+8 ü™ô</div>
                            </div>
                            
                            <div class="habit-option" data-points="12" data-impact="1.2" data-baseline-mapping="natural,fan">
                                <div class="habit-icon">üå°Ô∏è</div>
                                <div class="habit-info">
                                    <h4>Lowered thermostat</h4>
                                    <p>Reduced heating by 1¬∞C</p>
                                </div>
                                <div class="habit-points">+12 ü™ô</div>
                            </div>
                            
                            <div class="habit-option" data-points="10" data-impact="1.0" data-baseline-mapping="sometimes">
                                <div class="habit-icon">üöø</div>
                                <div class="habit-info">
                                    <h4>Shorter shower</h4>
                                    <p>5-minute shower today</p>
                                </div>
                                <div class="habit-points">+10 ü™ô</div>
                            </div>
                            
                            <div class="habit-option" data-points="15" data-impact="1.5" data-baseline-mapping="usually-on,most-day">
                                <div class="habit-icon">üîå</div>
                                <div class="habit-info">
                                    <h4>Unplugged devices</h4>
                                    <p>No phantom energy use</p>
                                </div>
                                <div class="habit-points">+15 ü™ô</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Shopping Habits (Hidden by default) -->
                    <div class="habit-category" id="shopping-habits" style="display: none;">
                        <div class="habit-options">
                            <div class="habit-option" data-points="15" data-impact="1.5" data-baseline-mapping="buy-new">
                                <div class="habit-icon">üõçÔ∏è</div>
                                <div class="habit-info">
                                    <h4>No shopping day</h4>
                                    <p>Bought nothing new today</p>
                                </div>
                                <div class="habit-points">+15 ü™ô</div>
                            </div>
                            
                            <div class="habit-option" data-points="10" data-impact="1.0" data-baseline-mapping="essentials">
                                <div class="habit-icon">‚ôªÔ∏è</div>
                                <div class="habit-info">
                                    <h4>Brought own bag</h4>
                                    <p>No single-use plastic bags</p>
                                </div>
                                <div class="habit-points">+10 ü™ô</div>
                            </div>
                            
                            <div class="habit-option" data-points="18" data-impact="2.0" data-baseline-mapping="second-hand">
                                <div class="habit-icon">üîÅ</div>
                                <div class="habit-info">
                                    <h4>Second-hand purchase</h4>
                                    <p>Chose pre-loved item instead of new</p>
                                </div>
                                <div class="habit-points">+18 ü™ô</div>
                            </div>
                            
                            <div class="habit-option" data-points="12" data-impact="1.2" data-baseline-mapping="no-buy">
                                <div class="habit-icon">ü•§</div>
                                <div class="habit-info">
                                    <h4>Reusable bottle</h4>
                                    <p>Used reusable bottle, no disposable cups</p>
                                </div>
                                <div class="habit-points">+12 ü™ô</div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="submit-btn" id="submitDailyBtn">
                        <i class="fas fa-check-circle"></i> Log Today's Actions
                    </button>
                    
                    <!-- Daily Summary Section -->
                    <div class="daily-summary" id="dailySummary">
                        <div class="summary-header">
                            <div class="summary-title">üéâ Today's Summary</div>
                            <div class="streak-display">
                                <i class="fas fa-check-circle"></i> Logged Successfully
                            </div>
                        </div>
                        
                        <div class="summary-stats">
                            <div class="summary-stat">
                                <div class="summary-value" id="todayPoints">0</div>
                                <div class="summary-label">EarthCredits Earned</div>
                            </div>
                            <div class="summary-stat">
                                <div class="summary-value" id="todayCO2">0kg</div>
                                <div class="summary-label">CO‚ÇÇ Saved</div>
                            </div>
                            <div class="summary-stat">
                                <div class="summary-value" id="improvementCount">0</div>
                                <div class="summary-label">Improvements Made</div>
                            </div>
                        </div>
                        
                        <div class="improvement-highlight" id="improvementHighlight" style="display: none;">
                            <h4 style="color: var(--earthcoin-dark); margin-bottom: 10px;">
                                <i class="fas fa-star"></i> Bonus EarthCredits Earned!
                            </h4>
                            <p id="improvementDetails">You made improvements over your baseline!</p>
                        </div>
                    </div>
                    
                    <!-- Baseline Comparison Section -->
                    <div class="baseline-comparison" id="baselineComparison">
                        <h4><i class="fas fa-chart-line"></i> Your Baseline Comparison</h4>
                        <p style="margin-bottom: 15px; color: #666;">Compare your daily actions with your baseline. Making improvements earns bonus EarthCredits! ü™ô</p>
                        <div class="comparison-grid" id="comparisonGrid">
                            <!-- Comparison items will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sidebar -->
            <div class="sidebar">
                <!-- EarthCredits Card -->
                <div class="earthcoin-card">
                    <div class="earthcoin-header">
                        <div class="earthcoin-icon">ü™ô</div>
                        <div class="earthcoin-title">EarthCredits</div>
                    </div>
                    <div class="earthcoin-amount" id="earthcoinAmount">0</div>
                    <p>Earn credits by logging eco-friendly habits!</p>
                    <div class="stat-change" id="todayEarthCoins">
                        <i class="fas fa-arrow-up"></i> Today: 0 ü™ô
                    </div>
                </div>
                
                                <!-- Baseline Summary -->
                <div class="baseline-card">
                    <div class="baseline-header">
                        <h3 class="section-title">
                            <i class="fas fa-chart-line"></i> Your Eco Baseline
                        </h3>
                        <a href="baseline.html" class="edit-baseline">
                            <i class="fas fa-edit"></i> Edit
                        </a>
                    </div>
                    
                    <div class="baseline-categories" id="baselineSummary">
                        <!-- Baseline items will be loaded here -->
                    </div>
                </div>
                
                <!-- Recent Activity -->
                <div class="activity-card">
                    <h3 class="section-title">
                        <i class="fas fa-history"></i> Recent Activity
                    </h3>
                    
                    <div class="activity-list" id="activityList">
                        <!-- Activity items will be loaded here -->
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="quick-actions">
                    <a href="community.html" class="action-btn">
                        <i class="fas fa-users"></i>
                        <span>Community</span>
                    </a>
                    <a href="index.html" class="action-btn">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                    </a>
                    <button class="action-btn" id="viewGardenBtn">
                        <i class="fas fa-seedling"></i>
                        <span>My Garden</span>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>¬© 2026 Pocket Garden. Every sustainable choice makes a difference.</p>
        </div>
    </div>
    
    <!-- Garden Modal -->
    <div class="modal" id="gardenModal">
        <div class="modal-content">
            <button class="modal-close" id="closeGardenModal">&times;</button>
            <h2 style="color: var(--dark-green); margin-bottom: 20px; font-size: 32px;">Your Garden üåø</h2>
            <div id="gardenDisplay" style="font-size: 100px; margin: 30px 0;"></div>
            <h3 id="gardenPlantName" style="color: var(--dark-green); margin-bottom: 15px;"></h3>
            <p id="gardenStatus" style="margin-bottom: 20px;"></p>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 30px;">
                <div style="background: #f0f9f0; padding: 15px; border-radius: 10px;">
                    <div style="font-size: 24px; margin-bottom: 10px;">üå±</div>
                    <div style="font-weight: 600;">Plants Owned</div>
                    <div id="plantsOwnedCount" style="font-size: 28px; font-weight: 700; color: var(--dark-green);">1</div>
                </div>
                <div style="background: #f0f9f0; padding: 15px; border-radius: 10px;">
                    <div style="font-size: 24px; margin-bottom: 10px;">ü™ô</div>
                    <div style="font-weight: 600;">Next Plant Cost</div>
                    <div id="nextPlantCost" style="font-size: 28px; font-weight: 700; color: var(--dark-green);">100</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Purchase Confirmation Modal -->
    <div class="modal" id="purchaseModal">
        <div class="modal-content">
            <button class="modal-close" id="closePurchaseModal">&times;</button>
            <h2 style="color: var(--dark-green); margin-bottom: 20px;" id="purchaseTitle">Confirm Purchase</h2>
            <div id="purchaseItemIcon" style="font-size: 60px; margin: 20px 0;"></div>
            <p id="purchaseDescription" style="margin-bottom: 30px;"></p>
            <div style="display: flex; gap: 15px; justify-content: center;">
                <button id="confirmPurchase" style="padding: 15px 30px; background: var(--primary-green); color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 16px;">
                    Buy Now
                </button>
                <button id="cancelPurchase" style="padding: 15px 30px; background: #f5f5f5; color: #666; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 16px;">
                    Cancel
                </button>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Dashboard loaded - Starting initialization');
            
            // ==================== GLOBAL VARIABLES ====================
            const currentUserId = localStorage.getItem('currentUserId');
            let users = JSON.parse(localStorage.getItem('users') || '{}');
            let currentUser = users[currentUserId] || {};
            
            // If no user is logged in or baseline not set, redirect
            if (!currentUserId) {
                window.location.href = 'index.html';
                return;
            }
            
            if (!currentUser.baselineSet) {
                window.location.href = 'baseline.html';
                return;
            }
            
            // ==================== INITIALIZE USER DATA ====================
            function initializeUserData() {
                // Initialize arrays and objects if they don't exist
                if (!currentUser.dailyHabits) currentUser.dailyHabits = [];
                if (!currentUser.totalPoints) currentUser.totalPoints = 0;
                if (!currentUser.earthCredits) currentUser.earthCredits = 0;
                if (!currentUser.streak) currentUser.streak = 0;
                if (!currentUser.totalKgSaved) currentUser.totalKgSaved = 0;
                if (!currentUser.lastCheckInDate) currentUser.lastCheckInDate = null;
                if (!currentUser.plants) currentUser.plants = [currentUser.starterPlant || 'Lily'];
                if (!currentUser.gardenLevel) currentUser.gardenLevel = 1;
                if (!currentUser.plantHealth) currentUser.plantHealth = 100;
                if (!currentUser.purchases) currentUser.purchases = [];
                
                // Save updated user data
                users[currentUserId] = currentUser;
                localStorage.setItem('users', JSON.stringify(users));
                console.log('User data initialized:', currentUser);
            }
            
            initializeUserData();
            
            // ==================== HABIT SELECTION SYSTEM ====================
            let selectedHabits = [];
            
            // Function to handle habit selection
            function handleHabitSelection(habitElement) {
                // Check if already selected
                const isSelected = habitElement.classList.contains('selected');
                
                if (isSelected) {
                    // Remove selection
                    habitElement.classList.remove('selected');
                    
                    // Find and remove from selectedHabits array
                    const habitText = habitElement.querySelector('h4').textContent;
                    selectedHabits = selectedHabits.filter(h => h.element !== habitElement);
                    
                    console.log('Habit deselected:', habitText);
                } else {
                    // Add selection
                    habitElement.classList.add('selected');
                    
                    // Get habit data
                    const points = parseInt(habitElement.getAttribute('data-points'));
                    const impact = parseFloat(habitElement.getAttribute('data-impact'));
                    const habitText = habitElement.querySelector('h4').textContent;
                    const baselineMapping = habitElement.getAttribute('data-baseline-mapping');
                    
                    // Get category from parent container
                    let category = '';
                    let parent = habitElement.closest('.habit-category');
                    if (parent && parent.id) {
                        category = parent.id.replace('-habits', '');
                    }
                    
                    // Add to selected habits
                    selectedHabits.push({
                        element: habitElement,
                        text: habitText,
                        points: points,
                        impact: impact,
                        category: category,
                        baselineMapping: baselineMapping
                    });
                    
                    console.log('Habit selected:', habitText, 'Category:', category, 'Points:', points);
                }
                
                // Update UI
                updateSubmitButton();
                updateBaselineComparison();
                
                // Log current selections
                console.log('Current selected habits:', selectedHabits.map(h => h.text));
            }
            
            // Event delegation for habit selection
            document.addEventListener('click', function(event) {
                const habitOption = event.target.closest('.habit-option');
                if (habitOption && !habitOption.classList.contains('disabled')) {
                    handleHabitSelection(habitOption);
                }
            });
            
            // ==================== CATEGORY TAB FUNCTIONALITY ====================
            const tabBtns = document.querySelectorAll('.tab-btn');
            const habitCategories = document.querySelectorAll('.habit-category');
            
            tabBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    
                    // Update active tab
                    tabBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show corresponding habits
                    habitCategories.forEach(cat => {
                        cat.style.display = 'none';
                    });
                    
                    const targetCategory = document.getElementById(`${category}-habits`);
                    if (targetCategory) {
                        targetCategory.style.display = 'block';
                    }
                });
            });
            
            // ==================== SUBMIT BUTTON FUNCTIONALITY ====================
            const submitBtn = document.getElementById('submitDailyBtn');
            
            function updateSubmitButton() {
                if (selectedHabits.length > 0) {
                    submitBtn.classList.remove('disabled');
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = '<i class="fas fa-check-circle"></i> Log Today\'s Actions';
                } else {
                    submitBtn.classList.add('disabled');
                    submitBtn.disabled = true;
                    submitBtn.innerHTML = '<i class="fas fa-check-circle"></i> Select actions first';
                }
            }
            
            submitBtn.addEventListener('click', function() {
                if (selectedHabits.length === 0) {
                    alert('Please select at least one eco action for today.');
                    return;
                }
                
                console.log('Submitting daily check-in...');
                
                // Get baseline mapping
                const baselineMapping = getBaselineMapping();
                console.log('Baseline mapping:', baselineMapping);
                
                // Calculate totals and improvements
                let todayPoints = 0;
                let todayEarthCredits = 0;
                let todayCO2 = 0;
                let improvements = [];
                
                selectedHabits.forEach(habit => {
                    const basePoints = habit.points;
                    const improvementBonus = calculateImprovementPoints(
                        baselineMapping[habit.category],
                        habit,
                        habit.category
                    );
                    
                    todayPoints += basePoints;
                    todayEarthCredits += basePoints + improvementBonus;
                    todayCO2 += habit.impact;
                    
                    if (improvementBonus > 0) {
                        improvements.push({
                            category: habit.category,
                            points: improvementBonus,
                            habit: habit.text
                        });
                    }
                    
                    console.log(`Habit: ${habit.text}, Base: ${basePoints}, Bonus: ${improvementBonus}, Total: ${basePoints + improvementBonus}`);
                });
                
                console.log('Totals:', { todayPoints, todayEarthCredits, todayCO2, improvements });
                
                // Update user data
                const todayDate = new Date().toDateString();
                
                // Check if this is a new day for streak
                if (currentUser.lastCheckInDate !== todayDate) {
                    const yesterday = new Date();
                    yesterday.setDate(yesterday.getDate() - 1);
                    const yesterdayDate = yesterday.toDateString();
                    
                    if (currentUser.lastCheckInDate === yesterdayDate) {
                        // Consecutive day - increase streak
                        currentUser.streak = (currentUser.streak || 0) + 1;
                        console.log('Streak increased to:', currentUser.streak);
                    } else {
                        // Broken streak - reset to 1
                        currentUser.streak = 1;
                        console.log('New streak started');
                    }
                    
                    currentUser.lastCheckInDate = todayDate;
                }
                
                // Update totals
                currentUser.totalPoints = (currentUser.totalPoints || 0) + todayPoints;
                currentUser.earthCredits = (currentUser.earthCredits || 0) + todayEarthCredits;
                currentUser.totalKgSaved = (currentUser.totalKgSaved || 0) + todayCO2;
                
                // Add to daily habits
                currentUser.dailyHabits.unshift({
                    date: todayDate,
                    habits: selectedHabits.map(h => ({
                        text: h.text,
                        points: h.points,
                        impact: h.impact,
                        category: h.category
                    })),
                    points: todayPoints,
                    earthCredits: todayEarthCredits,
                    co2Saved: todayCO2,
                    improvements: improvements,
                    improvementCount: improvements.length
                });
                
                // Keep only last 5 days
                currentUser.dailyHabits = currentUser.dailyHabits.slice(0, 5);
                
                // Save updated user data
                users[currentUserId] = currentUser;
                localStorage.setItem('users', JSON.stringify(users));
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                
                console.log('User data saved:', currentUser);
                
                // Update UI
                disableDailyCheckin();
                showTodaySummary(todayEarthCredits, todayCO2, improvements);
                
                // Update stats display
                updateDashboardStats();
                
                // Update progress
                updateRankProgress();
                
                // Update recent activity
                updateActivityList(currentUser.dailyHabits);
                
                // Update shop items
                updateShopItems();
                
                // Show success message
                let message = `üéâ Great job! You earned ${todayEarthCredits} EarthCredits ü™ô and saved ${todayCO2.toFixed(1)}kg of CO‚ÇÇ today!`;
                if (improvements.length > 0) {
                    message += `\n\nüåü You made ${improvements.length} improvements over your baseline!`;
                    improvements.forEach(imp => {
                        message += `\n‚Ä¢ ${imp.habit}: +${imp.points} bonus EarthCredits`;
                    });
                }
                alert(message);
            });
            
            // ==================== HELPER FUNCTIONS ====================
            function getBaselineMapping() {
                const baseline = currentUser.userBaseline?.selections || {};
                
                return {
                    transport: baseline[1]?.value || 'car-own',
                    food: baseline[3]?.value || 'some-meat',
                    energy: baseline[6]?.value || 'usually-on',
                    shopping: baseline[7]?.value || 'buy-new'
                };
            }
            
            function calculateImprovementPoints(baselineValue, habit, category) {
                // Define improvement tiers and bonus points
                const improvementMap = {
                    transport: {
                        'car-own': {
                            'walking': 15,
                            'cycling': 15,
                            'bus': 10,
                            'train': 10,
                            'car-shared': 5,
                            'car-own': 0
                        },
                        'motorbike': {
                            'walking': 12,
                            'cycling': 12,
                            'bus': 8,
                            'train': 8,
                            'car-shared': 3
                        },
                        'car-shared': {
                            'walking': 10,
                            'cycling': 10,
                            'bus': 6,
                            'train': 6,
                            'car-shared': 0
                        },
                        'bus': {
                            'walking': 8,
                            'cycling': 8,
                            'bus': 0,
                            'train': 0
                        },
                        'train': {
                            'walking': 8,
                            'cycling': 8,
                            'bus': 0,
                            'train': 0
                        },
                        'walking': {
                            'walking': 0
                        },
                        'cycling': {
                            'cycling': 0
                        }
                    },
                    food: {
                        'some-meat': {
                            'plant-based': 15,
                            'vegetarian': 10,
                            'some-fish': 5,
                            'some-meat': 0
                        },
                        'some-fish': {
                            'plant-based': 10,
                            'vegetarian': 8,
                            'some-fish': 0
                        },
                        'vegetarian': {
                            'plant-based': 8,
                            'vegetarian': 0
                        },
                        'plant-based': {
                            'plant-based': 0
                        }
                    },
                    energy: {
                        'usually-on': {
                            'always-off': 12,
                            'natural': 10,
                            'fan': 8,
                            'sometimes': 5,
                            'usually-on': 0
                        },
                        'most-day': {
                            'natural': 10,
                            'fan': 8,
                            'sometimes': 5,
                            'most-day': 0
                        },
                        'sometimes': {
                            'natural': 8,
                            'fan': 6,
                            'sometimes': 0
                        },
                        'fan': {
                            'natural': 5,
                            'fan': 0
                        },
                        'natural': {
                            'natural': 0
                        },
                        'always-off': {
                            'always-off': 0
                        }
                    },
                    shopping: {
                        'buy-new': {
                            'no-buy': 12,
                            'second-hand': 10,
                            'essentials': 6,
                            'buy-new': 0
                        },
                        'essentials': {
                            'no-buy': 8,
                            'second-hand': 6,
                            'essentials': 0
                        },
                        'second-hand': {
                            'no-buy': 5,
                            'second-hand': 0
                        },
                        'no-buy': {
                            'no-buy': 0
                        }
                    }
                };
                
                // Get bonus points for improvement
                const categoryMap = improvementMap[category];
                if (categoryMap && categoryMap[baselineValue]) {
                    const habitValues = habit.baselineMapping ? habit.baselineMapping.split(',') : [];
                    
                    // Check if selected habit is an improvement over baseline
                    for (const habitValue of habitValues) {
                        if (categoryMap[baselineValue][habitValue] !== undefined) {
                            return categoryMap[baselineValue][habitValue];
                        }
                    }
                }
                
                return 0; // No improvement
            }
            
            function updateProfilePictures(user) {
                const profilePlaceholder = document.getElementById('profilePlaceholder');
                const profileImage = document.getElementById('profileImage');
                const dropdownProfilePlaceholder = document.getElementById('dropdownProfilePlaceholder');
                const dropdownProfileImage = document.getElementById('dropdownProfileImage');
                
                if (user.profileIcon && user.profileIcon.endsWith('.png')) {
                    profilePlaceholder.style.display = 'none';
                    profileImage.src = user.profileIcon;
                    profileImage.style.display = 'block';
                    
                    dropdownProfilePlaceholder.style.display = 'none';
                    dropdownProfileImage.src = user.profileIcon;
                    dropdownProfileImage.style.display = 'block';
                } else {
                    profilePlaceholder.textContent = user.profileIcon || 'üë§';
                    dropdownProfilePlaceholder.textContent = user.profileIcon || 'üë§';
                }
            }
            
            function getRankIcon(rank) {
                const icons = ['üîò', 'üíö', 'üçÉ', 'üåø', 'üåü'];
                return icons[rank - 1] || icons[0];
            }
            
            function updateDashboardStats() {
                document.getElementById('streakCount').textContent = currentUser.streak || 0;
                document.getElementById('currentStreak').textContent = currentUser.streak || 0;
                document.getElementById('totalPoints').textContent = currentUser.earthCredits || 0;
                document.getElementById('earthCoinsCount').textContent = currentUser.earthCredits || 0;
                document.getElementById('earthcoinAmount').textContent = currentUser.earthCredits || 0;
                document.getElementById('kgSaved').textContent = `${currentUser.totalKgSaved ? currentUser.totalKgSaved.toFixed(1) : 0}kg`;
                document.getElementById('plantsCount').textContent = currentUser.plants ? currentUser.plants.length : 1;
                
                // Update EarthCredits display
                if (currentUser.dailyHabits.length > 0) {
                    const todayData = currentUser.dailyHabits.find(day => day.date === new Date().toDateString());
                    if (todayData) {
                        document.getElementById('pointsChange').innerHTML = `<i class="fas fa-plus"></i> Today: ${todayData.earthCredits || 0} ü™ô`;
                        document.getElementById('todayEarthCoins').innerHTML = `<i class="fas fa-arrow-up"></i> Today: ${todayData.earthCredits || 0} ü™ô`;
                    }
                }
            }
            
            function updateRankProgress() {
                const rankProgress = document.getElementById('rankProgress');
                const nextRankText = document.getElementById('nextRank');
                const progressPercentage = Math.min((currentUser.earthCredits || 0) / 500 * 100, 100);
                rankProgress.style.width = `${progressPercentage}%`;
                nextRankText.textContent = `${Math.max(0, 500 - (currentUser.earthCredits || 0))} EarthCredits to next level`;
            }
            
            function updateBaselineSummary(selections) {
                const container = document.getElementById('baselineSummary');
                container.innerHTML = '';
                
                const categories = [
                    { key: '1', icon: 'üöó', label: 'Transport' },
                    { key: '3', icon: 'üçΩ', label: 'Diet' },
                    { key: '6', icon: 'üí°', label: 'Energy' },
                    { key: '7', icon: 'üõç', label: 'Shopping' },
                    { key: '8', icon: '‚ôªÔ∏è', label: 'Waste' }
                ];
                
                categories.forEach(cat => {
                    if (selections[cat.key]) {
                        const item = document.createElement('div');
                        item.className = 'baseline-item';
                        item.innerHTML = `
                            <div class="baseline-icon">${cat.icon}</div>
                            <div class="baseline-text">
                                <h4>${cat.label}</h4>
                                <p>${selections[cat.key].text}</p>
                            </div>
                        `;
                        container.appendChild(item);
                    }
                });
            }
            
            function updateBaselineComparison() {
                const container = document.getElementById('comparisonGrid');
                const baselineMapping = getBaselineMapping();
                
                container.innerHTML = '';
                
                // Map categories
                const categories = [
                    { key: 'transport', name: 'Transport', icon: 'üöó', baseline: baselineMapping.transport },
                    { key: 'food', name: 'Food', icon: 'üçΩ', baseline: baselineMapping.food },
                    { key: 'energy', name: 'Energy', icon: 'üí°', baseline: baselineMapping.energy },
                    { key: 'shopping', name: 'Shopping', icon: 'üõç', baseline: baselineMapping.shopping }
                ];
                
                // Find selected habits for each category
                const selectedByCategory = {};
                selectedHabits.forEach(habit => {
                    if (!selectedByCategory[habit.category]) {
                        selectedByCategory[habit.category] = [];
                    }
                    selectedByCategory[habit.category].push(habit);
                });
                
                categories.forEach(cat => {
                    const selectedHabitsInCategory = selectedByCategory[cat.key] || [];
                    const hasImprovement = selectedHabitsInCategory.some(habit => 
                        calculateImprovementPoints(cat.baseline, habit, cat.key) > 0
                    );
                    
                    const item = document.createElement('div');
                    item.className = 'comparison-item';
                    
                    let baselineText = 'Not set';
                    if (cat.baseline) {
                        // Map baseline value to readable text
                        const baselineMap = {
                            'transport': {
                                'walking': 'Walking',
                                'cycling': 'Cycling',
                                'scooter': 'Scooter',
                                'bus': 'Bus',
                                'train': 'Train',
                                'car-shared': 'Car (shared)',
                                'motorbike': 'Motorbike',
                                'car-own': 'Car (on your own)'
                            },
                            'food': {
                                'plant-based': 'Plant-based',
                                'vegetarian': 'Vegetarian',
                                'some-fish': 'Some fish',
                                'some-meat': 'Some meat'
                            },
                            'energy': {
                                'natural': 'Natural ventilation',
                                'fan': 'Fan only',
                                'sometimes': 'Sometimes heating/AC',
                                'most-day': 'Heating/AC most of day',
                                'always-off': 'Always turn off devices',
                                'sometimes-on': 'Sometimes leave on',
                                'usually-on': 'Usually leave on'
                            },
                            'shopping': {
                                'buy-new': 'Buy new often',
                                'essentials': 'Stick to essentials',
                                'second-hand': 'Prefer second-hand',
                                'no-buy': 'No-buy days'
                            }
                        };
                        
                        baselineText = baselineMap[cat.key]?.[cat.baseline] || cat.baseline;
                    }
                    
                    let todayText = 'No action selected';
                    if (selectedHabitsInCategory.length > 0) {
                        todayText = selectedHabitsInCategory.map(h => h.text).join(', ');
                    }
                    
                    item.innerHTML = `
                        <div class="comparison-category">
                            <i class="fas fa-${cat.key === 'transport' ? 'car' : cat.key === 'food' ? 'utensils' : cat.key === 'energy' ? 'bolt' : 'shopping-bag'}"></i> ${cat.name}
                        </div>
                        <div class="comparison-baseline">
                            <strong>Your baseline:</strong> ${baselineText}
                        </div>
                        <div class="comparison-today">
                            <strong>Today:</strong> ${todayText}
                        </div>
                        ${hasImprovement ? '<div class="improvement-earned">Improvement detected! + bonus ü™ô</div>' : ''}
                    `;
                    
                    container.appendChild(item);
                });
            }
            
            function updateActivityList(dailyHabits) {
                const container = document.getElementById('activityList');
                container.innerHTML = '';
                
                if (dailyHabits.length === 0) {
                    container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">No activity yet. Log your first eco-habits!</p>';
                    return;
                }
                
                dailyHabits.slice(0, 3).forEach((day, index) => {
                    const item = document.createElement('div');
                    item.className = 'activity-item';
                    
                    const date = new Date(day.date).toLocaleDateString('en-US', { 
                        weekday: 'short',
                        month: 'short',
                        day: 'numeric'
                    });
                    
                    item.innerHTML = `
                        <div class="activity-icon">üìù</div>
                        <div class="activity-details">
                            <h4>${day.habits.length} eco actions</h4>
                            <p>${date}</p>
                        </div>
                        <div class="activity-points">+${day.earthCredits || day.points} ü™ô</div>
                    `;
                    container.appendChild(item);
                });
            }
            
            function disableDailyCheckin() {
                submitBtn.classList.add('disabled');
                submitBtn.disabled = true;
                submitBtn.innerHTML = '<i class="fas fa-check"></i> Already logged today';
                
                // Disable all habit options
                document.querySelectorAll('.habit-option').forEach(option => {
                    option.classList.add('disabled');
                    option.style.pointerEvents = 'none';
                });
                
                // Disable tabs
                tabBtns.forEach(btn => {
                    btn.disabled = true;
                    btn.style.pointerEvents = 'none';
                    btn.style.opacity = '0.5';
                });
            }
            
            function showTodaySummary(todayEarthCredits = 0, todayCO2 = 0, improvements = []) {
                const summaryDiv = document.getElementById('dailySummary');
                const todayPointsSpan = document.getElementById('todayPoints');
                const todayCO2Span = document.getElementById('todayCO2');
                const improvementSpan = document.getElementById('improvementCount');
                const improvementHighlight = document.getElementById('improvementHighlight');
                const improvementDetails = document.getElementById('improvementDetails');
                
                // If we have today's data, use it
                const todayDate = new Date().toDateString();
                const todayData = currentUser.dailyHabits.find(day => day.date === todayDate);
                
                if (todayData) {
                    todayPointsSpan.textContent = todayData.earthCredits || todayData.points;
                    todayCO2Span.textContent = `${todayData.co2Saved.toFixed(1)}kg`;
                    improvementSpan.textContent = todayData.improvementCount || 0;
                    
                    if (todayData.improvements && todayData.improvements.length > 0) {
                        let details = 'You earned bonus EarthCredits for:';
                        todayData.improvements.forEach(imp => {
                            details += `\n‚Ä¢ ${imp.habit}: +${imp.points} ü™ô`;
                        });
                        improvementDetails.textContent = details;
                        improvementHighlight.style.display = 'block';
                    } else {
                        improvementHighlight.style.display = 'none';
                    }
                } else {
                    todayPointsSpan.textContent = todayEarthCredits;
                    todayCO2Span.textContent = `${todayCO2.toFixed(1)}kg`;
                    improvementSpan.textContent = improvements.length;
                    
                    if (improvements.length > 0) {
                        let details = 'You earned bonus EarthCredits for:';
                        improvements.forEach(imp => {
                            details += `\n‚Ä¢ ${imp.habit}: +${imp.points} ü™ô`;
                        });
                        improvementDetails.textContent = details;
                        improvementHighlight.style.display = 'block';
                    } else {
                        improvementHighlight.style.display = 'none';
                    }
                }
                
                summaryDiv.style.display = 'block';
                summaryDiv.scrollIntoView({ behavior: 'smooth' });
            }
            
            function updateShopItems() {
                const userEarthCredits = currentUser.earthCredits || 0;
                const shopItems = document.querySelectorAll('.shop-item');
                
                shopItems.forEach(item => {
                    const price = parseInt(item.getAttribute('data-price'));
                    const effect = item.getAttribute('data-effect');
                    const plantType = item.getAttribute('data-plant');
                    
                    // Check if user can afford item
                    if (userEarthCredits >= price) {
                        item.classList.remove('disabled');
                    } else {
                        item.classList.add('disabled');
                    }
                    
                    // Check if user already owns this plant
                    if (effect === 'new-plant' && plantType && currentUser.plants && currentUser.plants.includes(plantType)) {
                        item.classList.add('disabled');
                        item.querySelector('.shop-item-name').textContent = `Owned: ${plantType}`;
                    }
                });
            }
            
            // ==================== SHOP FUNCTIONALITY ====================
            const shopItems = document.querySelectorAll('.shop-item');
            const purchaseModal = document.getElementById('purchaseModal');
            const closePurchaseModal = document.getElementById('closePurchaseModal');
            const cancelPurchase = document.getElementById('cancelPurchase');
            const confirmPurchase = document.getElementById('confirmPurchase');
            
            let selectedItem = null;
            
            shopItems.forEach(item => {
                item.addEventListener('click', function() {
                    if (this.classList.contains('disabled')) return;
                    
                    const itemName = this.getAttribute('data-item');
                    const itemPrice = parseInt(this.getAttribute('data-price'));
                    const itemEffect = this.getAttribute('data-effect');
                    const plantType = this.getAttribute('data-plant');
                    
                    selectedItem = {
                        element: this,
                        name: itemName,
                        price: itemPrice,
                        effect: itemEffect,
                        plant: plantType
                    };
                    
                    // Update modal content
                    document.getElementById('purchaseItemIcon').textContent = this.querySelector('.shop-item-icon').textContent;
                    document.getElementById('purchaseTitle').textContent = `Buy ${this.querySelector('.shop-item-name').textContent}`;
                    
                    let description = `Price: ${itemPrice} EarthCredits ü™ô\n\n`;
                    
                    if (itemEffect === 'water') {
                        description += "Water your plants to keep them healthy!";
                    } else if (itemEffect === 'sunlight') {
                        description += "Give your plants extra sunlight for faster growth!";
                    } else if (itemEffect === 'growth') {
                        description += "Special plant food to boost your garden's growth!";
                    } else if (itemEffect === 'new-plant') {
                        description += `Add a beautiful ${plantType} to your garden!`;
                    } else if (itemEffect === 'rainbow') {
                        description += "A magical rainbow boost for your entire garden!";
                    }
                    
                    document.getElementById('purchaseDescription').textContent = description;
                    
                    // Show modal
                    purchaseModal.style.display = 'flex';
                });
            });
            
            closePurchaseModal.addEventListener('click', function() {
                purchaseModal.style.display = 'none';
                selectedItem = null;
            });
            
            cancelPurchase.addEventListener('click', function() {
                purchaseModal.style.display = 'none';
                selectedItem = null;
            });
            
            confirmPurchase.addEventListener('click', function() {
                if (!selectedItem) return;
                
                const userEarthCredits = currentUser.earthCredits || 0;
                
                if (userEarthCredits >= selectedItem.price) {
                    // Process purchase
                    currentUser.earthCredits = userEarthCredits - selectedItem.price;
                    
                    // Apply item effect
                    if (selectedItem.effect === 'new-plant') {
                        if (!currentUser.plants.includes(selectedItem.plant)) {
                            currentUser.plants.push(selectedItem.plant);
                        }
                    } else if (selectedItem.effect === 'rainbow') {
                        // Rainbow boost - add bonus to all stats
                        currentUser.plantHealth = Math.min(100, (currentUser.plantHealth || 0) + 20);
                        currentUser.gardenLevel = (currentUser.gardenLevel || 1) + 1;
                    }
                    
                    // Record purchase
                    if (!currentUser.purchases) currentUser.purchases = [];
                    currentUser.purchases.push({
                        item: selectedItem.name,
                        price: selectedItem.price,
                        date: new Date().toISOString()
                    });
                    
                    // Save user data
                    users[currentUserId] = currentUser;
                    localStorage.setItem('users', JSON.stringify(users));
                    
                    // Update UI
                    updateDashboardStats();
                    updateShopItems();
                    
                    // Close modal
                    purchaseModal.style.display = 'none';
                    
                    // Show success message
                    alert(`‚úÖ Purchase successful! You bought ${selectedItem.element.querySelector('.shop-item-name').textContent}`);
                    
                    selectedItem = null;
                } else {
                    alert("‚ùå Not enough EarthCredits! Keep logging eco-habits to earn more.");
                }
            });
            
            // ==================== GARDEN MODAL ====================
            const gardenModal = document.getElementById('gardenModal');
            const closeGardenModal = document.getElementById('closeGardenModal');
            const viewGardenBtn = document.getElementById('viewGardenBtn');
            
            viewGardenBtn.addEventListener('click', function() {
                // Update garden display
                const gardenDisplay = document.getElementById('gardenDisplay');
                const plantName = document.getElementById('gardenPlantName');
                const gardenStatus = document.getElementById('gardenStatus');
                const plantsOwnedCount = document.getElementById('plantsOwnedCount');
                const nextPlantCost = document.getElementById('nextPlantCost');
                
                // Show main plant (most recent or highest level)
                const mainPlant = currentUser.plants[currentUser.plants.length - 1] || 'Lily';
                const plantEmoji = {
                    'Lily': 'üå∏',
                    'Tulip': 'üå∑',
                    'Rose': 'üåπ',
                    'Sunflower': 'üåª'
                }[mainPlant] || 'üå±';
                
                gardenDisplay.textContent = plantEmoji;
                plantName.textContent = `${mainPlant} Garden`;
                gardenStatus.textContent = `Level ${currentUser.gardenLevel || 1} | Health: ${currentUser.plantHealth || 100}%`;
                plantsOwnedCount.textContent = currentUser.plants.length;
                nextPlantCost.textContent = Math.max(100, currentUser.plants.length * 100);
                
                // Show modal
                gardenModal.style.display = 'flex';
            });
            
            closeGardenModal.addEventListener('click', function() {
                gardenModal.style.display = 'none';
            });
            
            // ==================== PROFILE DROPDOWN ====================
            const profileCircle = document.getElementById('profileCircle');
            const profileDropdown = document.getElementById('profileDropdown');
            
            profileCircle.addEventListener('click', function(e) {
                e.stopPropagation();
                profileDropdown.classList.toggle('show');
            });
            
            document.addEventListener('click', function() {
                profileDropdown.classList.remove('show');
            });
            
            profileDropdown.addEventListener('click', function(e) {
                e.stopPropagation();
            });
            
            // Logout functionality
            document.getElementById('logoutBtn').addEventListener('click', function(e) {
                e.preventDefault();
                localStorage.removeItem('currentUserId');
                window.location.href = 'index.html';
            });
            
            // ==================== INITIALIZE DASHBOARD ====================
            // Set current date
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('currentDate').textContent = now.toLocaleDateString('en-US', options);
            
            // Update user display
            updateProfilePictures(currentUser);
            document.getElementById('dropdownUserName').textContent = currentUser.name || 'Gardener';
            document.getElementById('dropdownUserEmail').textContent = currentUser.email || 'user@example.com';
            document.getElementById('welcomeName').textContent = currentUser.name || 'Gardener';
            
            // Set user plant
            const userPlant = document.getElementById('userPlant');
            const plantEmoji = {
                'Lily': 'üå∏',
                'Tulip': 'üå∑',
                'Rose': 'üåπ',
                'Sunflower': 'üåª'
            }[currentUser.starterPlant] || 'üå±';
            userPlant.textContent = plantEmoji;
            
            // Set rank information
            const baseline = currentUser.userBaseline || {};
            document.getElementById('dashboardRank').textContent = baseline.rankName || 'Carbon Recruit';
            document.getElementById('rankIcon').textContent = getRankIcon(baseline.rank || 1);
            
            // Update stats
            updateDashboardStats();
            updateRankProgress();
            
            // Update baseline summary
            updateBaselineSummary(baseline.selections || {});
            
            // Update baseline comparison
            updateBaselineComparison();
            
            // Update recent activity
            updateActivityList(currentUser.dailyHabits || []);
            
            // Update shop items
            updateShopItems();
            
            // Check if user already checked in today
            const today = new Date().toDateString();
            if (currentUser.lastCheckInDate === today) {
                disableDailyCheckin();
                showTodaySummary();
            }
            
            // Initialize submit button
            updateSubmitButton();
            
            console.log('Dashboard initialization complete!');
        });
    </script>
</body>
</html>
